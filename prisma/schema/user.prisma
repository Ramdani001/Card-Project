model Role {
    id        String   @id @default(uuid())
    name      String   @unique
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    users                    User[]
    cardCategoryRoleAccesses CardCategoryRoleAccess[]
    roleMenuAccesses         RoleMenuAccess[]
}

model CardCategoryRoleAccess {
    id String @id @default(uuid())

    roleId String
    role   Role   @relation(fields: [roleId], references: [id])

    categoryId String
    category   Category @relation(fields: [categoryId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([roleId, categoryId])
}

model RoleMenuAccess {
    id String @id @default(uuid())

    roleId String
    role   Role   @relation(fields: [roleId], references: [id])

    menuId String
    menu   Menu   @relation(fields: [menuId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([roleId, menuId])
}

model User {
    id        String   @id @default(uuid())
    email     String   @unique
    password  String
    name      String?
    phone     String?
    avatar    String?
    roleId    String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    role Role? @relation(fields: [roleId], references: [id], onDelete: SetNull)

    carts         Cart[]
    transactions  Transaction[]
    cardHistories CardHistory[]
}
